# Шаблон исследования (Discovery)

Шаблон для `.planning/phases/XX-name/DISCOVERY.md` — поверхностное исследование для выбора библиотеки/варианта.

**Назначение:** Ответить на вопросы "какую библиотеку/вариант выбрать" во время обязательного исследования в plan-phase.

Для глубокого исследования экосистемы ("как эксперты строят это") используйте `/gsd:research-phase`, который создаёт RESEARCH.md.

---

## Шаблон файла

```markdown
---
phase: XX-name
type: discovery
topic: [тема-исследования]
---

<session_initialization>
Перед началом исследования проверьте сегодняшнюю дату:
!`date +%Y-%m-%d`

Используйте эту дату при поиске "текущей" или "последней" информации.
Пример: Если сегодня 2025-11-22, ищите "2025", а не "2024".
</session_initialization>

<discovery_objective>
Исследовать [тему] для принятия решений в фазе [название фазы].

Цель: [Какое решение/реализацию это обеспечивает]
Область: [Границы]
Результат: DISCOVERY.md с рекомендацией
</discovery_objective>

<discovery_scope>
<include>
- [Вопрос для ответа]
- [Область для исследования]
- [Конкретное сравнение при необходимости]
</include>

<exclude>
- [Вне области данного исследования]
- [Отложить до фазы реализации]
</exclude>
</discovery_scope>

<discovery_protocol>

**Приоритет источников:**
1. **Context7 MCP** — Для документации библиотек/фреймворков (актуальная, авторитетная)
2. **Официальная документация** — Для платформо-специфичных или неиндексированных библиотек
3. **Веб-поиск** — Для сравнений, трендов, паттернов сообщества (проверяйте все находки)

**Чек-лист качества:**
Перед завершением исследования проверьте:
- [ ] Все утверждения имеют авторитетные источники (Context7 или официальная документация)
- [ ] Отрицательные утверждения ("X невозможно") проверены по официальной документации
- [ ] Синтаксис API/конфигурация из Context7 или официальной документации (никогда только из веб-поиска)
- [ ] Находки из веб-поиска перепроверены по авторитетным источникам
- [ ] Проверены последние обновления/журналы изменений на предмет критических изменений
- [ ] Рассмотрены альтернативные подходы (не только первое найденное решение)

**Уровни уверенности:**
- ВЫСОКИЙ: Context7 или официальная документация подтверждают
- СРЕДНИЙ: Веб-поиск + Context7/официальная документация подтверждают
- НИЗКИЙ: Только веб-поиск или только знания из обучения (отметить для валидации)

</discovery_protocol>


<output_structure>
Создать `.planning/phases/XX-name/DISCOVERY.md`:

```markdown
# Исследование [Темы]

## Резюме
[2-3 абзаца — что исследовалось, что найдено, что рекомендуется]

## Основная рекомендация
[Что делать и почему — конкретно и практично]

## Рассмотренные альтернативы
[Что ещё оценивалось и почему не выбрано]

## Ключевые находки

### [Категория 1]
- [Находка с URL источника и релевантностью для нашего случая]

### [Категория 2]
- [Находка с URL источника и релевантностью]

## Примеры кода
[Релевантные паттерны реализации, если применимо]

## Метаданные

<metadata>
<confidence level="high|medium|low">
[Почему такой уровень уверенности — на основе качества источников и верификации]
</confidence>

<sources>
- [Основные авторитетные источники]
</sources>

<open_questions>
[Что не удалось определить или требует валидации при реализации]
</open_questions>

<validation_checkpoints>
[Если уверенность НИЗКАЯ или СРЕДНЯЯ — список конкретных вещей для проверки при реализации]
</validation_checkpoints>
</metadata>
```
</output_structure>

<success_criteria>
- На все вопросы области ответы с авторитетными источниками
- Пункты чек-листа качества выполнены
- Чёткая основная рекомендация
- Находки с низкой уверенностью отмечены контрольными точками валидации
- Готово для формирования PLAN.md
</success_criteria>

<guidelines>
**Когда использовать discovery:**
- Выбор технологии неясен (библиотека A vs B)
- Нужны лучшие практики для незнакомой интеграции
- Требуется исследование API/библиотеки
- Одно решение в ожидании

**Когда НЕ использовать:**
- Устоявшиеся паттерны (CRUD, аутентификация с известной библиотекой)
- Детали реализации (отложить до выполнения)
- Вопросы, на которые можно ответить из существующего контекста проекта

**Когда использовать RESEARCH.md вместо этого:**
- Нишевые/сложные домены (3D, игры, аудио, шейдеры)
- Нужны знания экосистемы, а не просто выбор библиотеки
- Вопросы "как эксперты строят это"
- Используйте `/gsd:research-phase` для таких случаев
</guidelines>
