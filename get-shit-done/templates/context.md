# Шаблон контекста фазы

Шаблон для `.planning/phases/XX-name/{phase}-CONTEXT.md` — фиксирует решения по реализации для фазы.

**Цель:** Документировать решения, необходимые нижестоящим агентам. Исследователь использует это, чтобы знать, ЧТО исследовать. Планировщик использует это, чтобы знать, КАКИЕ выборы зафиксированы, а какие гибкие.

**Ключевой принцип:** Категории НЕ предопределены. Они возникают из того, что реально обсуждалось для ЭТОЙ фазы. У фазы CLI будут секции по CLI, у фазы UI — секции по UI.

**Нижестоящие потребители:**
- `gsd-phase-researcher` — Читает решения для фокусировки исследования (напр., "карточный макет" → исследовать паттерны карточных компонентов)
- `gsd-planner` — Читает решения для создания конкретных задач (напр., "бесконечная прокрутка" → задача включает виртуализацию)

---

## Шаблон файла

```markdown
# Фаза [X]: [Название] — Контекст

**Собрано:** [дата]
**Статус:** Готово к планированию

<domain>
## Граница фазы

[Чёткое описание того, что доставляет эта фаза — якорь объёма. Берётся из ROADMAP.md и зафиксировано. Обсуждение уточняет реализацию в рамках этой границы.]

</domain>

<decisions>
## Решения по реализации

### [Область 1, которая обсуждалась]
- [Конкретное принятое решение]
- [Другое решение, если применимо]

### [Область 2, которая обсуждалась]
- [Конкретное принятое решение]

### [Область 3, которая обсуждалась]
- [Конкретное принятое решение]

### На усмотрение Claude
[Области, где пользователь явно сказал "решай сам" — у Claude есть гибкость при планировании/реализации]

</decisions>

<specifics>
## Конкретные идеи

[Конкретные ссылки, примеры или моменты "я хочу как X" из обсуждения. Ссылки на продукты, конкретное поведение, паттерны взаимодействия.]

[Если нет: "Нет конкретных требований — открыт к стандартным подходам"]

</specifics>

<deferred>
## Отложенные идеи

[Идеи, возникшие во время обсуждения, но относящиеся к другим фазам. Зафиксированы здесь, чтобы не потерялись, но явно за пределами этой фазы.]

[Если нет: "Нет — обсуждение осталось в рамках фазы"]

</deferred>

---

*Фаза: XX-name*
*Контекст собран: [дата]*
```

<good_examples>

**Пример 1: Визуальная функция (Лента постов)**

```markdown
# Фаза 3: Лента постов — Контекст

**Собрано:** 2025-01-20
**Статус:** Готово к планированию

<domain>
## Граница фазы

Отображение постов от подписок в прокручиваемой ленте. Пользователи могут просматривать посты и видеть счётчики вовлечённости. Создание постов и взаимодействия — отдельные фазы.

</domain>

<decisions>
## Решения по реализации

### Стиль макета
- Карточный макет, не таймлайн и не список
- Каждая карточка показывает: аватар автора, имя, время, полный текст поста, счётчики реакций
- Карточки с лёгкими тенями, скруглёнными углами — современный вид

### Поведение загрузки
- Бесконечная прокрутка, не пагинация
- Pull-to-refresh на мобильных
- Индикатор новых постов вверху ("3 новых поста") вместо автоматической вставки

### Пустое состояние
- Дружелюбная иллюстрация + "Подпишитесь на людей, чтобы видеть посты здесь"
- Предложить 3-5 аккаунтов для подписки на основе интересов

### На усмотрение Claude
- Дизайн скелетона загрузки
- Точные отступы и типографика
- Обработка состояния ошибки

</decisions>

<specifics>
## Конкретные идеи

- "Мне нравится, как Twitter показывает индикатор новых постов, не нарушая позицию прокрутки"
- Карточки должны ощущаться как карточки задач в Linear — чистые, без нагромождения

</specifics>

<deferred>
## Отложенные идеи

- Комментирование постов — Фаза 5
- Закладки постов — добавить в бэклог

</deferred>

---

*Фаза: 03-post-feed*
*Контекст собран: 2025-01-20*
```

</good_examples>

<guidelines>
**Этот шаблон фиксирует РЕШЕНИЯ для нижестоящих агентов.**

Результат должен отвечать: "Что исследователю нужно изучить? Какие выборы зафиксированы для планировщика?"

**Хорошее содержание (конкретные решения):**
- "Карточный макет, не таймлайн"
- "3 повторные попытки при сбое сети, затем отказ"
- "Группировка по году, затем по месяцу"
- "JSON для программного использования, таблица для людей"

**Плохое содержание (слишком расплывчато):**
- "Должно ощущаться современным и чистым"
- "Хороший пользовательский опыт"
- "Быстро и отзывчиво"
- "Легко в использовании"

**После создания:**
- Файл находится в каталоге фазы: `.planning/phases/XX-name/{phase}-CONTEXT.md`
- `gsd-phase-researcher` использует решения для фокусировки исследования
- `gsd-planner` использует решения + исследование для создания исполняемых задач
- Нижестоящие агенты НЕ должны снова спрашивать пользователя о зафиксированных решениях
</guidelines>
